<ul>
  <li><a href="documentation/administration/friendly-url-solutions#commonedits">Common Edits to the Default .htacces File</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#adminprotection">Admin Protection</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#sessionhandling">Session Handling</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#cssjsdocuments">CSS or JS files as Evo documents</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#timezone">Timezone</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#defaultcharsets">Default Character Sets</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#registerglobals">Register Globals</a></li>
  <li><a href="documentation/administration/friendly-url-solutions#solvingie">Solving Internet Explorer Woes</a></li>
</ul>
<h2>Apache mod_rewrite .htaccess Solutions for Evo</h2>
<p>Evo supports Friendly URLs via this .htaccess file. You must serve web pages via Apache with mod_rewrite to use this functionality, and you must change the file name from ht.access to .htaccess. Additional tweaks and environment specific additions follow the default template below:</p>
<div><div id="highlighter_84127" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Options +FollowSymlinks</code></div><div class="line number2 index1 alt1"><code class="php plain">RewriteEngine On</code></div><div class="line number3 index2 alt2"><code class="php plain">RewriteBase /</code></div><div class="line number4 index3 alt1"><code class="php plain"># Fix Apache internal dummy connections from breaking [(site_url)] cache</code></div><div class="line number5 index4 alt2"><code class="php plain">RewriteCond %{HTTP_USER_AGENT} ^.*internal\ dummy\ connection.*$ [NC]</code></div><div class="line number6 index5 alt1"><code class="php plain">RewriteRule .* - [F,L]</code></div><div class="line number7 index6 alt2"><code class="php plain"># Rewrite domain.com -&gt; www.domain.com -- used with SEO Strict URLs plugin</code></div><div class="line number8 index7 alt1"><code class="php plain">#RewriteCond %{HTTP_HOST} .</code></div><div class="line number9 index8 alt2"><code class="php plain">#RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]</code></div><div class="line number10 index9 alt1"><code class="php plain">#RewriteRule (.*) http:</code><code class="php comments">//www.example.com/$1 [R=301,L]</code></div><div class="line number11 index10 alt2"><code class="php plain"># Exclude /assets </code><code class="php keyword">and</code> <code class="php plain">/manager directories from rewrite rules</code></div><div class="line number12 index11 alt1"><code class="php plain">RewriteRule ^(manager|assets) - [L]</code></div><div class="line number13 index12 alt2"><code class="php plain"># For Friendly URLs</code></div><div class="line number14 index13 alt1"><code class="php plain">RewriteCond %{REQUEST_FILENAME} !-f</code></div><div class="line number15 index14 alt2"><code class="php plain">RewriteCond %{REQUEST_FILENAME} !-d</code></div><div class="line number16 index15 alt1"><code class="php plain">RewriteRule ^(.*)$ index.php?q=</code><code class="php variable">$1</code> <code class="php plain">[L,QSA]</code></div><div class="line number17 index16 alt2"><code class="php plain"># Reduce server overhead by enabling output compression </code><code class="php keyword">if</code> <code class="php plain">supported.</code></div><div class="line number18 index17 alt1"><code class="php plain">#php_flag zlib.output_compression On</code></div><div class="line number19 index18 alt2"><code class="php plain">#php_value zlib.output_compression_level 5</code></div></div></td></tr></tbody></table></div></div>
<div class="note">If Windows IIS serves your pages, you're not left out of the Friendly URLs party, but optimal solutions do require a commercial IIS add on.</div>
<h3 id="commonedits">Common Edits to the Default .htacces File</h3>
<p>Make sure RewriteBase points to the directory where you installed Evo. E.g., "/Evo" if your installation is in a "Evo" subdirectory:</p>
<div><div id="highlighter_447689" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteBase /Evo</code></div></div></td></tr></tbody></table></div></div>
<p>Note in the last block of directives the gzip compression was left commented out since this can potentially cause issues in some environemnts. For a faster webserver experience, ucomment the last two lines as follows:</p>
<div><div id="highlighter_617416" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain"># Reduce server overhead by enabling output compression </code><code class="php keyword">if</code> <code class="php plain">supported.</code></div><div class="line number2 index1 alt1"><code class="php plain">php_flag zlib.output_compression On</code></div><div class="line number3 index2 alt2"><code class="php plain">php_value zlib.output_compression_level 5</code></div></div></td></tr></tbody></table></div></div>
<p>You may also want to make your URLs non-case-sensitive by adding a NC directive to the directive in the "For Friendly URLs" part:</p>
<div><div id="highlighter_682636" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteRule ^(.*)$ index.php?q=</code><code class="php variable">$1</code> <code class="php plain">[L,QSA,NC]</code></div></div></td></tr></tbody></table></div></div>
<p>If you prefer your website to always add the "www." part to always show "www.example.com" URLs, then the section below should be changed as follows:</p>
<div><div id="highlighter_530777" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteCond %{HTTP_HOST} .</code></div><div class="line number2 index1 alt1"><code class="php plain">RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]</code></div><div class="line number3 index2 alt2"><code class="php plain">RewriteRule (.*) http:</code><code class="php comments">//www.example.com/$1 [R=301,L]</code></div></div></td></tr></tbody></table></div></div>
<p>If you're working off of virtual domains and have a preview for development or while waiting for DNS updates to occur such as accessing your site through "http://10.0.0.1/~myacct", the rewrite rule should be written as follows. Don't forget to change it back when you go live.</p>
<div><div id="highlighter_554723" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteCond %{REQUEST_FILENAME} !-f</code></div><div class="line number2 index1 alt1"><code class="php plain">RewriteCond %{REQUEST_FILENAME} !-d</code></div><div class="line number3 index2 alt2"><code class="php plain">RewriteRule ^(.*)$ /~myacct/index.php?q=</code><code class="php variable">$1</code> <code class="php plain">[L,QSA]</code></div></div></td></tr></tbody></table></div></div>
<h3 id="adminprotection">Admin Protection</h3>
<p>If you would like to limit the admin interface to being accessed by only a specific IP address, but need access to some things on the public site like the captcha, use the following. Make sure this goes inside the admins interface directory:</p>
<div><div id="highlighter_16115" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain"># Allow admin access to specific IPs only</code></div><div class="line number2 index1 alt1"><code class="php plain">Options +FollowSymlinks</code></div><div class="line number3 index2 alt2"><code class="php plain">RewriteEngine On</code></div><div class="line number4 index3 alt1"><code class="php plain"># Deny by IP. The IP address(es) listed will get through.</code></div><div class="line number5 index4 alt2"><code class="php plain">RewriteCond %{REMOTE_ADDR} !^(192\.168\.0\.128)$</code></div><div class="line number6 index5 alt1"><code class="php plain">RewriteCond %{REQUEST_FILENAME} !/includes/veriword\.php$</code></div><div class="line number7 index6 alt2"><code class="php plain">RewriteRule ^(.*)$ index.php?q=</code><code class="php variable">$1</code> <code class="php plain">[L,QSA]</code></div></div></td></tr></tbody></table></div></div>
<div class="note">The first line ("Options +FollowSymlinks") may need to be commented out in some situations where a similar line is present in the site install root to prevent server errors.</div>
<h3 id="sessionhandling">Session Handling</h3>
<p>If you are deployed in an environment that has problems with aggressive garbage collection, as evidenced by unexpected and frequent logouts from the admin interface, then you can adjust the location of the sessions to remove them from the default and shared global tmp/session location:</p>
<div class="note">If you add this to your .htaccess file, make sure to also add it to the .htaccess file located in the admin interface directory.</div>
<div><div id="highlighter_468341" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">php_value session.save_path /path/to/your/web/content/sessions/</code></div><div class="line number2 index1 alt1"><code class="php plain">php_value session.gc_maxlifetime 28800</code></div></div></td></tr></tbody></table></div></div>
<h3 id="cssjsdocuments">CSS or JS files as Evo documents</h3>
<p>By default, Evo's htaccess template file excludes the /assets and admin interface directories from rewrite rules. If you are using a Evo document as a CSS file, you'll need to adjust the one line to allow rewrites in the /assets directory if that's where you store your CSS file.</p>
<div><div id="highlighter_136193" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteRule ^(manager|assets) - [L]</code></div></div></td></tr></tbody></table></div></div>
<p>Would become</p>
<div><div id="highlighter_532608" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteRule ^manager - [L]</code></div></div></td></tr></tbody></table></div></div>
<div class="note"><strong>Tip</strong><br>
  If you still wish to maintain some subdirectories in the exclusions, you could disable /assets/images and /assets/snippets for example with the following rule:
  <div><div id="highlighter_110968" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">RewriteRule ^(manager|assets/images|assets/snippets) - [L]</code></div></div></td></tr></tbody></table></div></div>
</div>
<h3 id="timezone">Timezone</h3>
<p>Some servers do not have their timezone settings set, which can cause issues. You can try the following setting with full details of timezone definitions available in the full <a target="_blank" rel="nofollow" href="//php.net/manual/en/timezones.php">List of Supported Timezones</a></p>
<div><div id="highlighter_982415" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">php_value </code><code class="php functions">date</code><code class="php plain">.timezone Europe/Moscow</code></div></div></td></tr></tbody></table></div></div>
<p>or</p>
<div><div id="highlighter_792991" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">SetEnv TZ America/Chicago</code></div></div></td></tr></tbody></table></div></div>
<h3 id="defaultcharsets">Default Character Sets</h3>
<p>Really, you should fix your code and database to handle character sets properly. But, if you insist, please read the <a target="_blank" rel="nofollow" href="//httpd.apache.org/docs/2.0/mod/core.html#adddefaultcharset">AddDefaultCharset Directive</a> and you might consider using:</p>
<div><div id="highlighter_802383" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">AddDefaultCharset utf-8</code></div></div></td></tr></tbody></table></div></div>
<h3 id="registerglobals">Register Globals</h3>
<div class="warning"><strong>Warning</strong><br>
  If your server has register_globals enabled (and it's not possible to disable), run as fast as possible to a new webhost. Seriously.
  <p><strong>As of Evo v.1.2.1 your server must have register_globals deactivated, otherwise Evo will not work.</strong></p>
</div>
<p>Your site is almost 99.99999% absolutely destined to be hacked at some point by script kiddies with register_globals on, ESPECIALLY in shared hosting environemnts. This is an inherrent security risk, equivalent to letting a baby play with a loaded gun and hoping they don't pull the trigger. If you're paying under $15/month, you're on a shared host. For more information about <a target="_blank" rel="nofollow" href="//php.net/register_globals">Using register_globals</a></p>
<p>To verify that this option has been set to OFF, open the Admin Interface and choose Reports -&gt; System Info and then click the phpinfo() link. Do a Find on Page for "register_globals". The Local Value should be OFF. If the Master Value is OFF then you do not need this directive here.</p>
<p>IF REGISTER_GLOBALS DIRECTIVE CAUSES 500 INTERNAL SERVER ERRORS:</p>
<p>Your server does not allow PHP directives to be set via .htaccess. In that case you must make this change in your php.ini file instead. If you are using a commercial web host, contact the administrators for assistance in doing this. Not all servers allow local php.ini files, and they should include all PHP configurations (not just this one), or you will effectively reset everything to PHP defaults. Consult www.php.net for more detailed information about setting PHP directives.</p>
<div><div id="highlighter_185869" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain"># Turn off register_globals because I have a lazy webhost that doesn't care about security</code></div><div class="line number2 index1 alt1"><code class="php plain">php_flag register_globals Off</code></div></div></td></tr></tbody></table></div></div>
<h3 id="solvingie">Solving Internet Explorer Woes</h3>
<p>If htc files are being used on your site, some servers may serve this with the incorrect mime type. The following can be added to resolve this. The following is critical for MS Windows XP SP2 surfers:</p>
<div><div id="highlighter_11284" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain"># Fix .htc mime type </code><code class="php keyword">for</code> <code class="php plain">Internet Explorer</code></div><div class="line number2 index1 alt1"><code class="php plain">AddType text/x-component .htc</code></div></div></td></tr></tbody></table></div></div>
<p>The following directives stop screen flicker in IE on CSS rollovers. When they're in place, you may have to do a force-refresh in order to see changes in your designs.</p>
<div><div id="highlighter_926771" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain"># Fix screen flicker </code><code class="php keyword">for</code> <code class="php plain">images in Internet Explorer</code></div><div class="line number2 index1 alt1"><code class="php plain">ExpiresActive On</code></div><div class="line number3 index2 alt2"><code class="php plain">ExpiresByType image/gif A2592000</code></div><div class="line number4 index3 alt1"><code class="php plain">ExpiresByType image/jpeg A2592000</code></div><div class="line number5 index4 alt2"><code class="php plain">ExpiresByType image/png A2592000</code></div><div class="line number6 index5 alt1"><code class="php plain">BrowserMatch </code><code class="php string">"MSIE"</code> <code class="php plain">brokenvary=1</code></div><div class="line number7 index6 alt2"><code class="php plain">BrowserMatch </code><code class="php string">"Mozilla/4.[0-9]{2}"</code> <code class="php plain">brokenvary=1</code></div><div class="line number8 index7 alt1"><code class="php plain">BrowserMatch </code><code class="php string">"Opera"</code> <code class="php plain">!brokenvary</code></div><div class="line number9 index8 alt2"><code class="php plain">SetEnvIf brokenvary 1 force-no-vary</code></div></div></td></tr></tbody></table></div></div>
<div class="note">.htaccess directives provide directory-level configuration overrides when you cannot access the main Apache httpd.conf file. The main configuration file should be used for server directives whenever possible because .htaccess rules result in increased page processing times.</div>